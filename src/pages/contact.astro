---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const programs = [
  { value: '', label: 'Select a program' },
  { value: 'ppl', label: 'Private Pilot License (PPL)' },
  { value: 'cpl', label: 'Commercial Pilot License (CPL)' },
  { value: 'fir', label: 'Flight Instructor Rating (FIR)' },
  { value: 'tour', label: 'Campus Tour' },
  { value: 'other', label: 'General Enquiry' },
];

const contactInfo = [
  {
    icon: 'location',
    title: 'Visit Us',
    primary: 'Coming soon',
    secondary: '',
    action: null,
  },
  {
    icon: 'phone',
    title: 'Call Us',
    primary: '+91 8618034181',
    secondary: 'Mon - Sat: 9AM - 6PM',
    action: 'tel:+918618034181',
  },
  {
    icon: 'email',
    title: 'Email Us',
    primary: 'udanika@birdkanflyaviation.com',
    secondary: 'We reply within 24 hours',
    action: 'mailto:udanika@birdkanflyaviation.com',
  },
  {
    icon: 'whatsapp',
    title: 'WhatsApp',
    primary: 'Chat with us',
    secondary: 'Quick responses',
    action: 'https://wa.me/918618034181',
  },
];

const icons = {
  location: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"/>`,
  phone: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"/>`,
  email: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"/>`,
  whatsapp: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"/>`,
};
---

<Layout title="Contact Us | Birdkanfly Aviation">
  <Header />
  
  <main>
    <!-- Hero Section -->
    <section class="relative pt-32 pb-20 lg:pt-40 lg:pb-28 overflow-hidden">
      <div class="absolute inset-0 bg-slate-950">
        <div class="absolute inset-0 bg-gradient-to-br from-primary-950/50 to-secondary-950/50"></div>
        <div class="absolute top-1/4 left-0 w-96 h-96 bg-primary-500/20 rounded-full blur-[120px]"></div>
        <div class="absolute bottom-0 right-0 w-96 h-96 bg-secondary-500/20 rounded-full blur-[120px]"></div>
      </div>
      
      <div class="container-custom relative">
        <div class="max-w-3xl">
          <span class="tag mb-6 bg-white/10 text-white border-white/10" data-animate>Contact Us</span>
          <h1 class="text-white mb-6" data-animate data-delay="100">
            Let's Start Your<br/>
            <span class="text-gradient-light">Aviation Journey</span>
          </h1>
          <p class="text-xl text-slate-300 leading-relaxed" data-animate data-delay="200">
            Have questions? Ready to enroll? Our team is here to guide you every step of the way.
          </p>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section class="section bg-white">
      <div class="container-custom">
        <div class="grid lg:grid-cols-5 gap-12 lg:gap-16">
          <!-- Form Column -->
          <div class="lg:col-span-3" data-animate>
            <div class="card p-8 lg:p-10">
              <h2 class="text-2xl font-bold mb-2">Send Us a Message</h2>
              <p class="text-slate-600 mb-8">Fill out the form and we'll get back to you within 24 hours.</p>
              
              <form 
                action="https://formsubmit.co/udanika@birdkanflyaviation.com" 
                method="POST"
                class="space-y-6"
              >
                <!-- Honeypot & Settings -->
                <input type="text" name="_honey" style="display:none" />
                <input type="hidden" name="_captcha" value="false" />
                <input type="hidden" name="_next" value="https://birdkanfly.vercel.app/contact?success=true" />
                <input type="hidden" name="_subject" value="New Enquiry from Birdkanfly Website" />
                
                <!-- Name Fields -->
                <div class="grid sm:grid-cols-2 gap-6">
                  <div>
                    <label for="firstName" class="label">First Name <span class="text-red-500">*</span></label>
                    <input 
                      type="text" 
                      id="firstName" 
                      name="firstName" 
                      required
                      class="input"
                      placeholder="John"
                    />
                  </div>
                  <div>
                    <label for="lastName" class="label">Last Name <span class="text-red-500">*</span></label>
                    <input 
                      type="text" 
                      id="lastName" 
                      name="lastName" 
                      required
                      class="input"
                      placeholder="Doe"
                    />
                  </div>
                </div>
                
                <!-- Email & Phone -->
                <div class="grid sm:grid-cols-2 gap-6">
                  <div>
                    <label for="email" class="label">Email <span class="text-red-500">*</span></label>
                    <input 
                      type="email" 
                      id="email" 
                      name="email" 
                      required
                      class="input"
                      placeholder="john@example.com"
                    />
                  </div>
                  <div>
                    <label for="phone" class="label">Phone <span class="text-red-500">*</span></label>
                    <input 
                      type="tel" 
                      id="phone" 
                      name="phone" 
                      required
                      class="input"
                      placeholder="+91 8618034181"
                    />
                  </div>
                </div>
                
                <!-- Program Interest -->
                <div>
                  <label for="program" class="label">I'm Interested In</label>
                  <select id="program" name="program" class="select">
                    {programs.map(p => (
                      <option value={p.value}>{p.label}</option>
                    ))}
                  </select>
                </div>
                
                <!-- Message -->
                <div>
                  <label for="message" class="label">Your Message <span class="text-red-500">*</span></label>
                  <textarea 
                    id="message" 
                    name="message" 
                    required
                    class="textarea"
                    placeholder="Tell us about yourself and what you'd like to know..."
                  ></textarea>
                </div>
                
                <!-- Submit -->
                <button type="submit" class="btn-primary w-full sm:w-auto">
                  Send Message
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                  </svg>
                </button>
              </form>
              
              <!-- Success Message -->
              <div id="success-message" class="hidden mt-6 p-4 rounded-xl bg-green-50 border border-green-200">
                <div class="flex items-center gap-3 text-green-800">
                  <svg class="w-5 h-5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <div>
                    <p class="font-semibold">Message Sent!</p>
                    <p class="text-sm text-green-700">We'll get back to you within 24 hours.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Info Column -->
          <div class="lg:col-span-2 space-y-6" data-animate data-delay="200">
            <div>
              <h2 class="text-2xl font-bold mb-2">Contact Information</h2>
              <p class="text-slate-600">Reach out through any of these channels.</p>
            </div>
            
            <!-- Contact Cards -->
            {contactInfo.map((info, i) => (
              <a 
                href={info.action || '#'}
                class:list={[
                  "card p-5 flex items-start gap-4 group",
                  info.action ? "hover:border-primary-200" : "pointer-events-none"
                ]}
              >
                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-primary-50 to-secondary-50 flex items-center justify-center text-primary-500 flex-shrink-0 group-hover:scale-105 transition-transform">
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <Fragment set:html={icons[info.icon as keyof typeof icons]} />
                  </svg>
                </div>
                <div>
                  <h3 class="font-semibold text-slate-900 group-hover:text-primary-500 transition-colors">{info.title}</h3>
                  <p class="text-slate-700">{info.primary}</p>
                  <p class="text-sm text-slate-500">{info.secondary}</p>
                </div>
              </a>
            ))}
            
            <!-- Office Hours -->
            <div class="card p-5 bg-slate-50">
              <h3 class="font-semibold mb-3">Office Hours</h3>
              <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                  <span class="text-slate-600">Monday - Friday</span>
                  <span class="font-medium">9:00 AM - 6:00 PM</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-600">Saturday</span>
                  <span class="font-medium">9:00 AM - 4:00 PM</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-slate-600">Sunday</span>
                  <span class="font-medium text-slate-400">Closed</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Map Section -->
    <section class="h-[400px] lg:h-[500px] bg-slate-200 relative">
      <iframe 
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3898.1234567890!2d76.6394!3d12.3051!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTLCsDE4JzE4LjQiTiA3NsKwMzgnMjEuOCJF!5e0!3m2!1sen!2sin!4v1234567890"
        width="100%" 
        height="100%" 
        style="border:0;" 
        allowfullscreen="" 
        loading="lazy" 
        referrerpolicy="no-referrer-when-downgrade"
        title="Birdkanfly Aviation Location"
        class="grayscale hover:grayscale-0 transition-all duration-500"
      ></iframe>
      
      <!-- Map Overlay Card -->
      <div class="absolute bottom-8 left-8 right-8 lg:left-8 lg:right-auto max-w-sm">
        <div class="card-glass p-6">
          <h3 class="font-bold mb-2">Birdkanfly Aviation Academy</h3>
          <p class="text-sm text-slate-600 mb-4">
            Coming soon
          </p>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  // Check for success parameter
  const urlParams = new URLSearchParams(window.location.search);
  if (urlParams.get('success') === 'true') {
    const successMessage = document.getElementById('success-message');
    if (successMessage) {
      successMessage.classList.remove('hidden');
      // Scroll to success message
      successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }
</script>
